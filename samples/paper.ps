%!
%%
% Copyright 1993, 1995 Randolph J. Herber.  All rights reserved.
%
% Permission to use, copy, and distribute this software and its
% documentation for any purpose with or without fee is hereby granted,
% provided that the above copyright notice appears in all copies and
% that both that copyright notice and this permission notice appear
% in supporting documentation.
%
% Permission to modify the software for personal use is granted,
% but not the right to distribute the modified code.  Note, a
% corporation or business partnership is considered a legal person.
% 
% If this software is embedded in an application and the Sheet Description
% generated by the application, that is considered modification by the
% user of the application.
%
% This software is provided "as is" without express or implied warranty.
% You must determine the fitness of this software for your own purposes.
%
% I request notification if this is embedded in a commerical application.
%
% Randolph J. Herber, rjh@yclept.chi.il.us, 27W169 Sunnyside, Winfield, IL, USA
%
% Prologue
%
/D{def}bind def /B{bind def}bind D /E{exch def}B /L{rlineto stroke}B
/pixel {transform round exch round exch itransform}B
/dpixel {dtransform round exch round exch idtransform}B
/X{exch}B /LW{0 dpixel pop setlinewidth}B /?{log}B
/M{pixel moveto}B /T{pixel translate}B
/Thick{.5 LW}B /Thin{.1 LW}B /Gray{0.5 setgray}B /Black{0 setgray}B
/CC[0 5 ?]D /C[2 ? 3 ? 4 ? 6 ? 7 ? 8 ? 9 ?]D
/CH[1.25 ? 1.5 ? 1.75 ? 2.5 ? 3.5 ? 4.5 ? 5.5 ? 6.5 ? 7.5 ? 8.5 ?]D
/in{72 mul}B /mm{2.8346 mul}B /pt{}B /by{}B
/Letter{612 792}B /Legal{612 1008}B /Ledger{612 1224}B
/A3{842.7452 1191.822}B /A4{595.9108 842.7452}B /A5{421.3726 595.9108}B
/PageSize{/long E /short E}B
/land{90 rotate 0 short neg translate /High short D /Wide long D}B
/port{/High long D /Wide short D}B
/Offset{/Yoff E /Xoff E Xoff Yoff translate
  /High High Yoff sub Yoff sub D /Wide Wide Xoff sub Xoff sub D}B
/Square {/Ycells E /Xcells E
  /Xunit Wide Xcells div D /Yunit High Ycells div D
  /Unit Xunit Yunit lt {Xunit}{Yunit}ifelse D
  /Wide Unit Xcells mul D /High Unit Ycells mul D}B
/xlinear{/minor E /major E /total minor major mul D
  /shaded minor 2 mod 0 eq minor 4 ge and D
  /step Wide total div D Thin 0 1 total {step mul 0 M 0 High L}for
  /step Wide major div D Thick 0 1 major {step mul 0 M 0 High L}for
  shaded{gsave Gray Thin 0.5 1 major {step mul 0 M 0 High L}for grestore}if}B
/ylinear{/minor E /major E /total minor major mul D
  /shaded minor 2 mod 0 eq minor 4 ge and D
  /step High total div D Thin 0 1 total {step mul 0 X M Wide 0 L}for
  /step High major div D Thick 0 1 major {step mul 0 X M Wide 0 L}for
  shaded{gsave Gray Thin 0.5 1 major {step mul 0 X M Wide 0 L}for grestore}if}B
/xlog{/cycles E /step Wide cycles div D Wide 0 M 0 High L
  0 1 cycles 1 sub {step mul /base E
    Thick CC{step mul base add 0 M 0 High L}forall
    Thin C{step mul base add 0 M 0 High L}forall
    Gray CH{step mul base add 0 M 0 High L}forall Black}for}B
/ylog{/cycles E /step High cycles div D 0 High M Wide 0 L
  0 1 cycles 1 sub {step mul /base E
    Thick CC{step mul base add 0 X M Wide 0 L}forall
    Thin C{step mul base add 0 X M Wide 0 L}forall
    Gray CH{step mul base add 0 X M Wide 0 L}forall Black}for}B
/Xlinear{/Incr E /Start E /minor E /major E /total minor major mul D
  /shaded minor 2 mod 0 eq minor 4 ge and D
  /step Wide total div D Thin 0 1 total {step mul 0 M 0 High L}for
  /step Wide major div D Thick 0 1 major {step mul 0 M 0 High L}for
	0 1 major {gsave step mul -7 T -2 0 M Start =string cvs show
		grestore /Start Start Incr add D}for
  shaded{gsave Gray Thin 0.5 1 major {step mul 0 M 0 High L}for grestore}if}B
/Ylinear{/Incr E /Start E /minor E /major E /total minor major mul D
  /shaded minor 2 mod 0 eq minor 4 ge and D
  /step High total div D Thin 0 1 total {step mul 0 X M Wide 0 L}for
  /step High major div D Thick 0 1 major {step mul 0 X M Wide 0 L}for
	0 1 major {gsave step mul -2 X T Start =string cvs
		dup stringwidth pop neg -2 moveto show
		grestore /Start Start Incr add D}for
  shaded{gsave Gray Thin 0.5 1 major {step mul 0 X M Wide 0 L}for grestore}if}B
/Xlog{/Start E /cycles E /step Wide cycles div D
  0 1 cycles 1 sub {step mul /base E
    gsave base -7 T -2 0 M Start =string cvs show grestore /Start Start 1 add D
    Thick CC{step mul base add 0 M 0 High L}forall
    Thin C{step mul base add 0 M 0 High L}forall
    Gray CH{step mul base add 0 M 0 High L}forall Black}for
  Wide 0 M 0 High L gsave Wide -7 T -2 0 M Start =string cvs show grestore}B
/Ylog{/Start E /cycles E /step High cycles div D 0 High M Wide 0 L
  0 1 cycles 1 sub {step mul /base E
    gsave -2 base T Start =string cvs
	dup stringwidth pop neg -2 moveto show grestore /Start Start 1 add D
    Thick CC{step mul base add 0 X M Wide 0 L}forall
    Thin C{step mul base add 0 X M Wide 0 L}forall
    Gray CH{step mul base add 0 X M Wide 0 L}forall Black}for
  0 High M Wide 0 L gsave -2 High T Start =string cvs
	dup stringwidth pop neg -2 moveto show grestore}B
/TwoPi 6.28318530717958647688 D
/Polar {/mina E /maja E /minor E /major E /radius Wide 2 div D
  /shaded minor 2 mod 0 eq minor 4 ge and D
  newpath 0 0 moveto Wide 0 rlineto 0 High rlineto Wide neg 0 rlineto
  closepath clip
  /total minor major mul D
  gsave radius High 2 div translate newpath
  /stepmr radius total div D Thin 0 1 total
    {stepmr mul /r E 0 0 r 0 180 arc 0 0 r 180 360 arc closepath stroke}for
  /stepmj radius major div D Thick 0 1 major
    {stepmj mul /r E 0 0 r 0 180 arc 0 0 r 180 360 arc closepath stroke}for
  minor 2 mod 0 eq minor 4 ge and {gsave Gray Thin 0.5 1 major
    {stepmj mul /r E 0 0 r 0 180 arc 0 0 r 180 360 arc closepath stroke}for
    grestore}if
  /total mina maja mul D
  /step 360 total div D gsave Thin
    /mr step 0 gt step 45 le and
      {1.2 stepmr step sin mul div round stepmr mul}
      {0}ifelse D
    0 1 total {pop mr 0 moveto radius 0 lineto stroke step rotate}for grestore
  [2 3 4 5 6 8] {{/part E mina part mod 0 eq mr 0 gt and
    { /total part maja mul D
      /step 360 total div D gsave Thin
        /wr step 0 gt step 45 le and
          {2 stepmr step sin mul div round stepmr mul}
          {0}ifelse D
        wr mr lt {
          0 1 total {pop wr 0 moveto mr 0 lineto stroke step rotate}for grestore
        }if
    }if
  } stopped pop}forall
  /step 360 maja div D gsave Thick
    /mr step 0 gt step 45 le and
      {1.2 stepmr step sin mul div round stepmr mul}
      {0}ifelse D
    0 1 maja {pop mr 0 moveto radius 0 lineto stroke step rotate}for grestore
  [4 8 12 16 20 24 32] {{/part E maja part mod 0 eq mr 0 gt and
    { /step 360 part div D gsave Thick
        /wr step 0 gt step 45 le and
          {2 stepmr step sin mul div round stepmr mul}
          {0}ifelse D
        wr mr lt {
          0 1 part {pop wr 0 moveto mr 0 lineto stroke step rotate} for grestore
        }if
    }if
  } stopped pop}forall
}B
/Helvetica findfont [5 0 0 6 0 0] makefont setfont
%
% The input is free format and can be divided into % several lines at any
% space.  Comments start with a `%' character and extend to the end of a line.
%
% Sheet description:
%
% 1. Specify the paper size, either in Letter, Legal, Ledger, A3, A4, A5, or
%    narrow dimension by long dimension in inches (in), points (pt), or
%    millimeters (mm).  In all cases, the word `by' is optional.
%
%	e.g. Legal PageSize or 8.5 in by 11 in PageSize, 
%    
% 2. Specify the paper orientation.  The x dimension is horizonal; the y
%    dimension is vertical.  The choices are landscape (land) which is
%    wider than tall or portrait (port) which is taller than wide.
%
%	e.g. port or land
%
% 3. Optionally, specify the margin offsets, x dimension first, y dimension
%    second.  The offsets can be specified in inches (in), points (pt), or
%    millimeters (mm).  The default is no margin offset which most printer
%    are not able to handle properly.  0.5 in by 0.5 in is suggested.
%
%	e.g. 0.5 in by 0.5 in Offset
%
% 4. If linear or log scales are used and square cells are desired,
%    then a specification of the number of major divisions in the
%    x dimension and then in the y dimension are needed followed by
%    a Square specification.  This specification is optional.
%
%	e.g. 18 by 13 Square
% 
% 5. The direction of a orthogonal scale is indicated by the first letter.
%    The case of the first letter indicates whether or not that dimension
%    is labeled.
%
%    For `linear' scales, the first or only pair of arguments is the number
%    of major divisions and the number of minor divisions per major division,
%    in that order.  If a labeled scale will be requested, the starting,
%    lower or left, label and increment numbers is the second pair.  The
%    arguments are followed by the scale specification.
%
%    For `log' scales, the first or only argument is the number of cycles.
%    If If a labeled scale will be requested, the starting, lower or left,
%    label is the second argument (an implicit increment of 1 is used).
%    The arguments are followed by the scale specification.
%
%    A `Polar' graph may be used in place of a pair of orthogonal scales.
%    This specification is preceded by four arguments: the number of major
%    radial divisions, the number of minor radial divisions per major
%    radial division, the number of major angular divisions (which may be
%    a nonintegeral real number), and the number of minor angular divisions
%    per major angular division.  Labeling is not available.
%
%	e.g. 18 10 0 1 Xlinear 13 10 0 1 Ylinear,
%	     18 10 xlinear 4 ylog
%	     4 10 36 10 Polar
%
% 6. Optionally, a number of copies can specified by inserting the desired
%    number of copies into the `/#copies 10 def' command.
%
% 7. Command the actual printing with a `showpage' command.
%
% A few examples follow:
%
%   8.5 in by 11 in PageSize land 0.5 in 0.5 in Offset 18 13 Square
%   18 10 0 1 Xlinear 13 10 0 1 Ylinear showpage
%
%   8.5 in by 11 in PageSize land 0.5 in 0.5 in Offset 5 xlog 4 ylog showpage
%
%   8.5 in by 11 in PageSize land 0.5 in 0.5 in Offset
%   4 10 TwoPi 10 mul 10 Polar /#copies 10 def showpage
%
8.5 in by 11 in PageSize land 0.5 in 0.5 in Offset
4 10 TwoPi 10 mul 10 Polar /#copies 20 def showpage
